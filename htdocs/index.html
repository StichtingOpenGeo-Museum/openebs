<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>openebs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Platform om Koppelvlak 15 en 17 berichten te versturen.">
    <meta name="author" content="Stichting OpenGeo">

    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <link href="assets/css/openebs2.css" rel="stylesheet">
    <link href="assets/css/datepicker.css" rel="stylesheet">
    <link href="assets/Leaflet/leaflet.css" rel="stylesheet" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <link rel="stylesheet" href="assets/Leaflet/leaflet.ie.css" />
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body data-spy="scroll" data-target=".bs-docs-sidebar">

    <!-- Navbar
    ================================================== -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active">
                <a class="page" href="#map" data-toggle="tab">openebs</a>
              </li>
              <li>
                <a class="page" href="#berichten" data-toggle="tab">Berichten</a>
              </li>
              <li>
                <a class="page" href="#lijnen" data-toggle="tab">Lijnen</a>
              </li>
              <li>
                <a class="page" href="#scenario" data-toggle="tab">Scenario</a>
              </li>
            </ul>
	    <form class="navbar-form pull-right">
	      <span><a class='toggleToMap btn btn-success btn-normal disabled' href="#nieuwBerichtModal" id="btnNieuwBericht" onClick="return false;">Nieuw Bericht</a></span>
	      <span><a class='toggleToMap btn btn-danger btn-normal disabled' href="#wijzigingModal" onClick="return false;">Wijzig Dienst</a></span>
            </form>
          </div>
        </div>
      </div>
    </div>

<div id="map" class="map">&nbsp;</div>
    <div id="lijnenpanel" style="position: absolute; left: 0px; top: 40px; z-index: 1000;">
      <div class="btn-group btn-group-vertical" id="lijnen-BUS" style="float: left; margin: 2px;"></div>
      <div class="btn-group btn-group-vertical" id="lijnen-TRAM" style="float: left; margin: 2px;"></div>
      <div class="btn-group btn-group-vertical" id="lijnen-BOAT" style="float: left; margin: 2px;"></div>
   </div>


<div id="all" class="tab-content" style="position: absolute; top: 0px; right: 0; width: 50%;">
    <div id="berichten" class="tab-pane" style="">
        <table class="table table-hover">
            <tr><th>Begintijd</th><th>Eindtijd</th><th>Bericht</th><th>Aantal haltes</th><th></th></tr>
        </table>
    </div>
    <div id="lijnen" class="tab-pane">
    </div>
    <div id="scenario" class="tab-pane" style="">
        <table class="table table-hover">
            <tr><th>Scenario</th><th>Aantal haltes</th><th>Gebruiker</th><th></th></tr>
        </table>
    </div>
</div>

<!--
<table id="all" style="margin-top: 40px;">
<tr>
<td id="tab" class="tab-content">
<div class="tab-pane" id="berichten">
<table class="table table-hover">
<tr><th>Begintijd</th><th>Eindtijd</th><th>Bericht</th><th>Aantal haltes</th><th></th></tr>
<tr><td>14-12-2012 11:00:00</td><td>14-12-2012 11:00:00</td><td>Test Bericht</td><td>1</td><td><button class="btn btn-success btn-mini" onclick=""><i class="icon-refresh icon-white"></i></button> <button class="btn btn-danger btn-mini" onclick="" style="float: right;"><i class="icon-trash icon-white"></i></button></td></tr>
</table>
</div>

<div class="tab-pane" id="scenario">
<table class="table table-hover">
<tr><th>Scenario</th><th>Aantal haltes</th><th>Gebruiker</th><th></th></tr>
<tr><td>Alle Haltes</td><td>1004</td><td>Stefan</td><td><button class="btn btn-success btn-mini" onclick=""><i class="icon-play icon-white"></i></button> <button class="btn btn-danger btn-mini" onclick="" style="float: right;"><i class="icon-trash icon-white"></i></button></td></tr>
</table>
</td>
</tr>
</table>

<section id="lijnen">

</section>

-->

<div id="nieuwBerichtModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h3 id="myModalLabel">Nieuw Bericht</h3>
            </div>
            <div class="modal-body">
  <form class="form-horizontal">
      <input type="hidden" name="stops" value="" id="stops" />
      <div class="control-group">
        <label class="control-label" for="messagepriority">Prioriteit</label>
        <div class="controls">
          <div id="messagepriority" class="btn-group btn-fixed" data-toggle="buttons-radio"><button name="messagepriority" value="CALAMITY" type="button" class-toggle="btn-danger" class="btn btn-mini" title="Calamiteiten, acute en ongeplande verstoring van de dienstuitvoering met als gevolg acute en volledige uitval van het OV voor de betreffende halte.">Calamiteit</button><button name="messagepriority" value="PTPROCESS" type="button" class-toggle="btn-success" class="btn btn-mini active btn-success" title="OV-proces gerelateerde mededelingen, informatie over de dienstuitvoering.">OV</button><button name="messagepriority" value="COMMERCIAL" type="button" class-toggle="btn-success" class="btn btn-mini" title="Commerci&euml;le mededelingen, OV gerelateerde informatie die niet over de dienstuitvoering gaat.">Commercieel</button><button name="messagepriority" value="MISC" type="button" class-toggle="btn-success" class="btn btn-mini" title="Overig, mededingen die niet onder een van de andere categorie&euml;n valt.">Overig</button></div>
          <p class="help-block">Invloed op het operationeel proces.</p>
        </div>
      </div>
      
      <div class="control-group">
        <label class="control-label" for="messagetype">Soort</label>
        <div class="controls">
       <div id="messagetype" class="btn-group btn-fixed" data-toggle="buttons-radio"><button name="messagetype" value="GENERAL" type="button" class-toggle="btn-success" class="btn btn-mini active btn-success" title="Algemeen bericht dat getoond wordt op de onderste regel van det display. Overschrijft de eventuele aanwezige ritinformatie op de onderste regel.">Algemeen</button><button name="messagetype" value="ADDITIONAL" type="button" class-toggle="btn-success" class="btn btn-mini" title="Tekst die getoond wordt op de onderste regel van het display in geval dat de regel niet in gebruik is voor het tonen van ritinformatie.">Extra</button><button name="messagetype" value="OVERRULE" type="button" class-toggle="btn-success" class="btn btn-mini" title="Tekst die op het gehele display getoond wordt. Vervangt eventueel andere getoonde informatie.">Overschrijf</button><button name="messagetype" value="BOTTOMLINE" type="button" class-toggle="btn-success" class="btn btn-mini" title="Tekst die op de onderste regels van het display wordt. De overgebleven display regels tonen ritinformatie.">Onderaan</button></div>
          <p class="help-block">Locatie van het te tonen bericht.</p>
        </div>
      </div>

      <div class="control-group">
        <label class="control-label" for="messagecontent">Nieuwe vrije tekst</label>
        <div class="controls">
          <textarea type="text" class="input-xlarge limit" id="messagecontent" maxlength="255" row="1" cols="50" style="font-family: monospace; font-size: x-small;" data-provide="limit" data-countre="#counter" placeholder="Schrijf hier de nieuwe vrije tekst..."></textarea>
      <em id="counter">255</em>
        </div>
      </div>

      <div class="control-group">
        <label class="control-label" for="messagestarttime">Begintijd</label>
        <div class="controls">
       <input id="messagestarttime" type="text" data-datepicker-format="dd-mm-yyyy hh:ii:ss" />
        </div>
      </div>

      <div class="control-group">
        <label class="control-label" for="messageendtime">Eindtijd</label>
        <div class="controls">
       <input id="messageendtime" type="text" data-datepicker-format="dd-mm-yyyy hh:ii:ss" />
        </div>
      </div>

      <div class="control-group" style="display: none">
        <label class="control-label" for="messagescenario">Scenario</label>
        <div class="controls">
       <input id="messagescenario" type="text" class="input-xlarge" maxlength="255" />
            <p class="help-block">Naam van het scenario, om later te plannen.</p>
        </div>
      </div>

  </form>

            </div>
<div id="nieuwBerichtModalAlert"></div>
            <div class="modal-footer">
              <button class="btn" data-dismiss="modal">Sluit</button>
              <button class="btn btn-primary" id="nieuw-submit" onclick="kv15submit();">Publiceer</button>
            </div>
          </div>



            </div>


    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <script type="text/javascript" src="assets/js/proj4js-compressed.js"></script>
    <script type="text/javascript" src="assets/js/OpenLayers.js"></script>
    <script type="text/javascript" src="assets/js/jquery.js"></script>
    <script type="text/javascript" src="assets/js/datepicker.js"></script>
    <script type="text/javascript" src="assets/js/jquery.qtip-1.0.0-rc3.min.js"></script>
    <script type="text/javascript" src="assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="assets/js/bootstrap-limit.js"></script>
    <script type="text/javascript" src="assets/js/map.js"></script>
    <script type="text/javascript" src="assets/js/kv15.js"></script>
    <script>

       $(document).ready(function() {
        $.ajaxSetup({cache:false});
        initopenlayers();
        $(".limit").limit({ maxChars: 255, warnChars: 78, counter: "#counter" });

$('.btn-group > .btn, .btn[data-toggle="button"]').click(function() {

        if($(this).attr('class-toggle') != undefined && !$(this).hasClass('disabled')){
            var btnGroup = $(this).parent('.btn-group');

            if(btnGroup.attr('data-toggle') == 'buttons-radio') {
                btnGroup.find('.btn').each(function() {
                    $(this).removeClass($(this).attr('class-toggle'));
                });
                $(this).addClass($(this).attr('class-toggle'));
            }

            if(btnGroup.attr('data-toggle') == 'buttons-checkbox' || $(this).attr('data-toggle') == 'button') {
                if($(this).hasClass('active')) {
                    $(this).removeClass($(this).attr('class-toggle'));
                } else {
                    $(this).addClass($(this).attr('class-toggle'));
                }
             }
          }
      });



       });



       $('a[data-toggle="tab"]').on('show', function (e) {
         if ($(e.target).attr('href') == '#map') {
            $('#map').css('width', '100%');
            $('#lijnenpanel').hide();

            vectors.addFeatures(stops_features);
         } else if ($(e.target).attr('href') == '#lijnen') {
            $('#map').css('width', '100%');
            $.getJSON('http://www.opentripplanner.nl:1344/line/HTM', function(data) {
                $.each(data, function(transporttype, value) {
                    $("#lijnen-"+transporttype).empty();
                    $.each(value, function(key, value) {
                        $("#lijnen-"+transporttype).append("<a class='btn' style='width: 1em;' onClick='showLine(\""+value.id+"\");' title='"+value.name+"'>"+value.linenr+"</a>");
                    });
                });
            });
            $('#lijnenpanel').show();
         } else {
            if ($(e.target).attr('href') == '#berichten') {
                updateBerichten();
            }

            $('#map').css('width', '50%');
            $('#lijnenpanel').hide();
         }
       });

      $('#input-scenario').keyup(function() {
      	if (this.value.length == 0) {
	   $("#input04").removeAttr("disabled");
	   $("#input05").removeAttr("disabled");
	   $("#nieuw-submit").text('Publiceer');
	} else {
	   $("#input04").attr("disabled", "disabled");
	   $("#input05").attr("disabled", "disabled");
	   $("#nieuw-submit").text('Opslaan');
	}
      });

    </script>
  </body>
</html>
